"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5749],{5749:(w,g,c)=>{c.r(g),c.d(g,{HistorialSolpePageModule:()=>x});var p=c(177),u=c(4341),l=c(4742),f=c(4964),o=c(4438),m=c(8079);function h(i,r){if(1&i&&(o.j41(0,"ion-row")(1,"ion-col"),o.EFF(2),o.k0s(),o.j41(3,"ion-col"),o.EFF(4),o.k0s()()),2&i){const e=r.$implicit;o.R7$(2),o.JRh(e.empresa),o.R7$(2),o.SpI("$",e.precio,"")}}function F(i,r){if(1&i&&(o.j41(0,"ion-grid",16)(1,"ion-row",20)(2,"ion-col")(3,"b"),o.EFF(4,"Empresa"),o.k0s()(),o.j41(5,"ion-col")(6,"b"),o.EFF(7,"Precio"),o.k0s()()(),o.DNE(8,h,5,2,"ion-row",17),o.k0s()),2&i){const e=o.XpG().$implicit;o.R7$(8),o.Y8G("ngForOf",e.comparaciones)}}function b(i,r){1&i&&(o.j41(0,"ion-text",21),o.EFF(1," Sin productos"),o.k0s())}function E(i,r){if(1&i&&(o.j41(0,"ion-card-content")(1,"ion-card",16)(2,"ion-card-header")(3,"ion-card-title"),o.EFF(4),o.k0s(),o.j41(5,"ion-card-subtitle"),o.EFF(6),o.k0s(),o.j41(7,"ion-card-subtitle"),o.EFF(8),o.k0s()(),o.j41(9,"ion-card-content",16)(10,"ion-text",18)(11,"b"),o.EFF(12,"Precio"),o.k0s()(),o.DNE(13,F,9,1,"ion-grid",15)(14,b,2,0,"ion-text",19),o.k0s()()()),2&i){const e=r.$implicit;o.R7$(4),o.Lme("Item ",e.item," - ",e.descripcion,""),o.R7$(2),o.SpI("Cantidad: ",e.cantidad,""),o.R7$(2),o.SpI("C\xf3digo: ",e.codigo_referencial,""),o.R7$(5),o.Y8G("ngIf",null==e.comparaciones?null:e.comparaciones.length),o.R7$(),o.Y8G("ngIf",!e.comparaciones||0===e.comparaciones.length)}}function k(i,r){if(1&i&&(o.j41(0,"ion-card",16)(1,"ion-card-header")(2,"ion-card-title"),o.EFF(3),o.k0s(),o.j41(4,"ion-card-subtitle"),o.EFF(5),o.k0s(),o.j41(6,"ion-card-subtitle"),o.EFF(7),o.k0s(),o.j41(8,"ion-card-subtitle"),o.EFF(9),o.k0s()(),o.DNE(10,E,15,6,"ion-card-content",17),o.k0s()),2&i){const e=o.XpG(2);o.R7$(3),o.SpI("Detalles SOLPE #",e.solpeEncontrada.numero_solpe,""),o.R7$(2),o.SpI("Fecha: ",e.solpeEncontrada.fecha,""),o.R7$(2),o.SpI("Usuario: ",e.solpeEncontrada.usuario,""),o.R7$(2),o.SpI("Estatus: ",e.solpeEncontrada.estatus,""),o.R7$(),o.Y8G("ngForOf",e.solpeEncontrada.items)}}function S(i,r){1&i&&(o.j41(0,"div")(1,"ion-text",22)(2,"p"),o.EFF(3,"No se encontr\xf3 la SOLPE con ese n\xfamero."),o.k0s()()())}function P(i,r){if(1&i){const e=o.RV6();o.j41(0,"div")(1,"ion-grid")(2,"ion-row")(3,"ion-col",9)(4,"ion-item")(5,"ion-label",10),o.EFF(6,"N\xfamero de SOLPE"),o.k0s(),o.j41(7,"ion-input",11),o.mxI("ngModelChange",function(t){o.eBV(e);const s=o.XpG();return o.DH7(s.numeroBusqueda,t)||(s.numeroBusqueda=t),o.Njj(t)}),o.k0s()()(),o.j41(8,"ion-col",12)(9,"ion-button",13),o.bIt("click",function(){o.eBV(e);const t=o.XpG();return o.Njj(t.buscarSolpe())}),o.nrm(10,"ion-icon",14),o.k0s()()()(),o.DNE(11,k,11,5,"ion-card",15)(12,S,4,0,"div",8),o.k0s()}if(2&i){const e=o.XpG();o.R7$(7),o.R50("ngModel",e.numeroBusqueda),o.R7$(4),o.Y8G("ngIf",e.solpeEncontrada),o.R7$(),o.Y8G("ngIf",e.buscado&&!e.solpeEncontrada)}}function j(i,r){if(1&i){const e=o.RV6();o.j41(0,"div")(1,"ion-card",16)(2,"ion-grid")(3,"ion-row",24)(4,"ion-col",25)(5,"ion-item")(6,"ion-label",10),o.EFF(7,"Fecha"),o.k0s(),o.j41(8,"ion-input",26),o.mxI("ngModelChange",function(t){o.eBV(e);const s=o.XpG(2);return o.DH7(s.filtroFecha,t)||(s.filtroFecha=t),o.Njj(t)}),o.k0s()()(),o.j41(9,"ion-col",25)(10,"ion-item")(11,"ion-label",10),o.EFF(12,"F. Estatus"),o.k0s(),o.j41(13,"ion-input",5),o.mxI("ngModelChange",function(t){o.eBV(e);const s=o.XpG(2);return o.DH7(s.filtroEstatus,t)||(s.filtroEstatus=t),o.Njj(t)}),o.k0s()()(),o.j41(14,"ion-col",25)(15,"ion-item")(16,"ion-label",10),o.EFF(17,"F. Responsable Correctivo"),o.k0s(),o.j41(18,"ion-input",5),o.mxI("ngModelChange",function(t){o.eBV(e);const s=o.XpG(2);return o.DH7(s.filtroResponsable,t)||(s.filtroResponsable=t),o.Njj(t)}),o.k0s()()(),o.j41(19,"ion-col",25)(20,"ion-item")(21,"ion-label",10),o.EFF(22,"F. Usuario"),o.k0s(),o.j41(23,"ion-input",5),o.mxI("ngModelChange",function(t){o.eBV(e);const s=o.XpG(2);return o.DH7(s.filtroUsuario,t)||(s.filtroUsuario=t),o.Njj(t)}),o.k0s()()()(),o.j41(24,"ion-row")(25,"ion-col",27)(26,"ion-button",28),o.bIt("click",function(){o.eBV(e);const t=o.XpG(2);return o.Njj(t.filtrarSolpes())}),o.EFF(27," Aplicar Filtros "),o.k0s()(),o.j41(28,"ion-col",27)(29,"ion-button",29),o.bIt("click",function(){o.eBV(e);const t=o.XpG(2);return o.Njj(t.limpiarFiltros())}),o.EFF(30," Limpiar Filtros "),o.k0s()()()()()()}if(2&i){const e=o.XpG(2);o.R7$(8),o.R50("ngModel",e.filtroFecha),o.R7$(5),o.R50("ngModel",e.filtroEstatus),o.R7$(5),o.R50("ngModel",e.filtroResponsable),o.R7$(5),o.R50("ngModel",e.filtroUsuario)}}function R(i,r){if(1&i&&(o.j41(0,"ion-grid")(1,"ion-row",20)(2,"ion-col")(3,"b"),o.EFF(4,"N\xb0 SOLPE"),o.k0s()(),o.j41(5,"ion-col")(6,"b"),o.EFF(7,"Fecha"),o.k0s()(),o.j41(8,"ion-col")(9,"b"),o.EFF(10,"Numero de contrato"),o.k0s()(),o.j41(11,"ion-col")(12,"b"),o.EFF(13,"Usuario"),o.k0s()(),o.j41(14,"ion-col")(15,"b"),o.EFF(16,"Estatus"),o.k0s()()(),o.j41(17,"ion-row")(18,"ion-col"),o.EFF(19),o.k0s(),o.j41(20,"ion-col"),o.EFF(21),o.k0s(),o.j41(22,"ion-col"),o.EFF(23),o.k0s(),o.j41(24,"ion-col"),o.EFF(25),o.k0s(),o.j41(26,"ion-col"),o.EFF(27),o.k0s()()()),2&i){const e=r.$implicit;o.R7$(19),o.JRh(e.numero_solpe),o.R7$(2),o.JRh(e.fecha),o.R7$(2),o.JRh(e.numero_contrato),o.R7$(2),o.JRh(e.usuario),o.R7$(2),o.JRh(e.estatus)}}function M(i,r){1&i&&(o.j41(0,"ion-text",30),o.nrm(1,"ion-icon",31),o.k0s())}function C(i,r){if(1&i&&(o.j41(0,"div"),o.DNE(1,j,31,4,"div",8)(2,R,28,5,"ion-grid",17),o.nrm(3,"br")(4,"br")(5,"br")(6,"br"),o.DNE(7,M,2,0,"ion-text",23),o.k0s()),2&i){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.mostrarFiltros),o.R7$(),o.Y8G("ngForOf",e.solpesFiltradas),o.R7$(5),o.Y8G("ngIf",0===e.solpesFiltradas.length)}}const v=[{path:"",component:(()=>{var i;class r{constructor(n){this.firestore=n,this.segmentoSeleccionado="historial",this.solpeEncontrada=null,this.buscado=!1,this.filtroFecha="",this.filtroEstatus="",this.filtroResponsable="",this.filtroUsuario="",this.mostrarFiltros=!1,this.solpesFiltradas=[],this.solpesOriginal=[],this.ordenAscendente=!0}ngOnInit(){this.cargarSolpes()}cargarSolpes(){this.firestore.collection("solpes").get().subscribe(n=>{const t=[];n.docs.forEach(s=>{const a=s.data();a.id=s.id,t.push(a)}),this.solpesOriginal=t,this.solpesFiltradas=[...this.solpesOriginal]})}buscarSolpe(){this.firestore.collection("solpes",n=>n.where("numero_solpe","==",this.numeroBusqueda)).get().subscribe(n=>{this.solpeEncontrada=n.empty?null:n.docs[0].data(),this.buscado=!0})}filtrarSolpes(){this.solpesFiltradas=this.solpesOriginal.filter(n=>{var t,s,a;let _="";if(n.fecha)try{if("string"==typeof n.fecha&&n.fecha.includes("/")){const d=n.fecha.split("/");3===d.length&&(_=`${d[2]}-${d[1]}-${d[0]}`)}}catch(d){console.error("Error procesando la fecha:",d),_=""}const O=!this.filtroFecha||_===this.filtroFecha,I=!this.filtroEstatus||(null===(t=n.estatus)||void 0===t?void 0:t.toLowerCase().includes(this.filtroEstatus.toLowerCase())),$=!this.filtroResponsable||(null===(s=n.numero_contrato)||void 0===s?void 0:s.toLowerCase().includes(this.filtroResponsable.toLowerCase())),G=!this.filtroUsuario||(null===(a=n.usuario)||void 0===a?void 0:a.toLowerCase().includes(this.filtroUsuario.toLowerCase()));return O&&I&&$&&G})}ordenarSolpes(){this.ordenAscendente=!this.ordenAscendente,this.solpesFiltradas.sort((n,t)=>this.ordenAscendente?n.numero_solpe-t.numero_solpe:t.numero_solpe-n.numero_solpe)}limpiarFiltros(){this.filtroFecha="",this.filtroEstatus="",this.filtroResponsable="",this.filtroUsuario="",this.solpesFiltradas=[...this.solpesOriginal]}}return(i=r).\u0275fac=function(n){return new(n||i)(o.rXU(m.Qe))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-historial-solpe"]],decls:21,vars:5,consts:[["slot","start"],["defaultHref","/menu-solpe",2,"color","white"],["slot","end","size","small","fill","clean",3,"click"],["name","filter"],[1,"ion-padding"],[3,"ngModelChange","ngModel"],["value","historial",2,"color","rgb(87, 189, 132)"],["value","buscar"],[4,"ngIf"],["size","10"],["position","floating"],["type","number",3,"ngModelChange","ngModel"],["size","2"],["expand","block","shape","Round",2,"--background","rgb(87, 189, 132)",3,"click"],["name","search-outline"],["style","color: white;",4,"ngIf"],[2,"color","white"],[4,"ngFor","ngForOf"],["color","primary"],["color","medium",4,"ngIf"],[1,"header-row"],["color","medium"],["color","danger"],["class","no-solped-container",4,"ngIf"],[1,"ion-align-items-center"],["size","12","size-md","3"],["type","date",3,"ngModelChange","ngModel"],["size","6"],["expand","block",2,"--background","rgb(87, 189, 132)",3,"click"],["expand","block","color","danger",3,"click"],[1,"no-solped-container"],["name","cloud-offline-outline",1,"no-solped-icon"]],template:function(n,t){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),o.nrm(3,"ion-back-button",1),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Historial de SOLPED"),o.k0s(),o.j41(6,"ion-button",2),o.bIt("click",function(){return t.mostrarFiltros=!t.mostrarFiltros}),o.j41(7,"ion-icon",3),o.EFF(8),o.k0s()(),o.j41(9,"ion-button",2),o.bIt("click",function(){return t.ordenarSolpes()}),o.EFF(10),o.k0s()()(),o.j41(11,"ion-content",4)(12,"ion-segment",5),o.mxI("ngModelChange",function(a){return o.DH7(t.segmentoSeleccionado,a)||(t.segmentoSeleccionado=a),a}),o.j41(13,"ion-segment-button",6)(14,"ion-label"),o.EFF(15,"Historial de SOLPES"),o.k0s()(),o.j41(16,"ion-segment-button",7)(17,"ion-label"),o.EFF(18,"Buscar por n\xfamero"),o.k0s()()(),o.DNE(19,P,13,3,"div",8)(20,C,8,3,"div",8),o.k0s()),2&n&&(o.R7$(8),o.JRh(t.mostrarFiltros?"Ocultar Filtros":"Mostrar Filtros"),o.R7$(2),o.SpI(" ",t.ordenAscendente?"\u2193":"\u2191"," "),o.R7$(2),o.R50("ngModel",t.segmentoSeleccionado),o.R7$(7),o.Y8G("ngIf","buscar"===t.segmentoSeleccionado),o.R7$(),o.Y8G("ngIf","historial"===t.segmentoSeleccionado))},dependencies:[p.Sq,p.bT,u.BC,u.vS,l.Jm,l.QW,l.b_,l.I9,l.ME,l.HW,l.tN,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.uz,l.he,l.ln,l.Gp,l.eP,l.IO,l.BC,l.ai,l.su,l.Je,l.Gw,l.el],styles:[".table-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:auto}.styled-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#57bd84;color:#fff}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#333;font-weight:700}.search-btn[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;padding:10px}.header-row[_ngcontent-%COMP%]{background-color:#57bd84;font-weight:700}ion-col[_ngcontent-%COMP%]{text-align:center}ion-segment-button[_ngcontent-%COMP%]{--indicator-color: rgb(87, 189, 132)}ion-segment-button.md[_ngcontent-%COMP%]{--color: #ffffff;--color-checked: rgb(87, 189, 132);--indicator-height: 4px}ion-segment-button.ios[_ngcontent-%COMP%]{--color: rgb(87, 189, 132);--color-checked: #fff;--border-radius: 20px}ion-label[_ngcontent-%COMP%]{color:#fff}ion-input[_ngcontent-%COMP%]{color:#fff}ion-card-title[_ngcontent-%COMP%]{color:#fff}ion-card-subtitle[_ngcontent-%COMP%]{color:#fff}.no-solped-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:60vh;text-align:center}.no-solped-icon[_ngcontent-%COMP%]{font-size:48px;color:#fff;margin-top:20px}"]}),r})()}];let H=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[f.iI.forChild(v),f.iI]}),r})(),x=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[p.MD,u.YN,l.bv,H]}),r})()}}]);