"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[206],{206:(M,d,r)=>{r.r(d),r.d(d,{SolpePageModule:()=>x});var p=r(177),u=r(4341),s=r(4742),_=r(4964),g=r(467),e=r(4438),F=r(4211),m=r(1182),j=r(8079);function f(l,a){if(1&l){const n=e.RV6();e.j41(0,"ion-button",103),e.bIt("click",function(){e.eBV(n);const o=e.XpG().index,i=e.XpG(2);return e.Njj(i.editarItem(o))}),e.nrm(1,"ion-icon",104),e.k0s()}}function h(l,a){if(1&l){const n=e.RV6();e.j41(0,"ion-button",105),e.bIt("click",function(){e.eBV(n);const o=e.XpG().index,i=e.XpG(2);return e.Njj(i.guardarItem(o))}),e.nrm(1,"ion-icon",106),e.k0s()}}function k(l,a){if(1&l){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ion-input",97),e.mxI("ngModelChange",function(o){const i=e.eBV(n).$implicit;return e.DH7(i.descripcion,o)||(i.descripcion=o),e.Njj(o)}),e.bIt("ionInput",function(){const o=e.eBV(n).$implicit;return e.Njj(o.descripcion=o.descripcion.toUpperCase())})("ionBlur",function(){const o=e.eBV(n).index,i=e.XpG(2);return e.Njj(i.verificarYGuardarItem(o))}),e.k0s()(),e.j41(5,"td")(6,"ion-input",97),e.mxI("ngModelChange",function(o){const i=e.eBV(n).$implicit;return e.DH7(i.codigo_referencial,o)||(i.codigo_referencial=o),e.Njj(o)}),e.bIt("ionInput",function(){const o=e.eBV(n).$implicit;return e.Njj(o.codigo_referencial=o.codigo_referencial.toUpperCase())})("ionBlur",function(){const o=e.eBV(n).index,i=e.XpG(2);return e.Njj(i.verificarYGuardarItem(o))}),e.k0s()(),e.j41(7,"td")(8,"ion-input",98),e.mxI("ngModelChange",function(o){const i=e.eBV(n).$implicit;return e.DH7(i.cantidad,o)||(i.cantidad=o),e.Njj(o)}),e.bIt("ionBlur",function(){const o=e.eBV(n).index,i=e.XpG(2);return e.Njj(i.verificarYGuardarItem(o))}),e.k0s()(),e.j41(9,"td"),e.DNE(10,f,2,0,"ion-button",99)(11,h,2,0,"ion-button",100),e.j41(12,"ion-button",101),e.bIt("click",function(){const o=e.eBV(n).index,i=e.XpG(2);return e.Njj(i.eliminarItem(o))}),e.nrm(13,"ion-icon",102),e.k0s()()()}if(2&l){const n=a.$implicit,t=a.index;e.R7$(2),e.JRh(t+1),e.R7$(2),e.R50("ngModel",n.descripcion),e.Y8G("readonly",!n.editando),e.R7$(2),e.R50("ngModel",n.codigo_referencial),e.Y8G("readonly",!n.editando),e.R7$(2),e.R50("ngModel",n.cantidad),e.Y8G("readonly",!n.editando),e.R7$(2),e.Y8G("ngIf",!n.editando),e.R7$(),e.Y8G("ngIf",n.editando)}}function v(l,a){if(1&l){const n=e.RV6();e.j41(0,"div",7)(1,"ion-item")(2,"ion-label",8),e.EFF(3,"N\xfamero de SOLPE"),e.k0s(),e.j41(4,"ion-input",9),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.solpe.numero_solpe,o)||(i.solpe.numero_solpe=o),e.Njj(o)}),e.k0s()(),e.j41(5,"ion-item")(6,"ion-label",8),e.EFF(7,"Fecha"),e.k0s(),e.j41(8,"ion-input",10),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.solpe.fecha,o)||(i.solpe.fecha=o),e.Njj(o)}),e.k0s()(),e.j41(9,"ion-item")(10,"ion-label",8),e.EFF(11,"Responsable Correctivo"),e.k0s(),e.j41(12,"ion-select",4),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.solpe.numero_contrato,o)||(i.solpe.numero_contrato=o),e.Njj(o)}),e.j41(13,"ion-select-option",11),e.EFF(14,"10-10-01"),e.k0s(),e.j41(15,"ion-select-option",12),e.EFF(16,"10-10-02"),e.k0s(),e.j41(17,"ion-select-option",13),e.EFF(18,"10-10-03"),e.k0s(),e.j41(19,"ion-select-option",14),e.EFF(20,"10-10-03"),e.k0s(),e.j41(21,"ion-select-option",15),e.EFF(22,"10-10-05"),e.k0s(),e.j41(23,"ion-select-option",16),e.EFF(24,"10-10-06"),e.k0s(),e.j41(25,"ion-select-option",17),e.EFF(26,"10-10-10"),e.k0s(),e.j41(27,"ion-select-option",18),e.EFF(28,"10-10-12"),e.k0s(),e.j41(29,"ion-select-option",19),e.EFF(30,"10-10-15"),e.k0s(),e.j41(31,"ion-select-option",20),e.EFF(32,"20-10-01"),e.k0s(),e.j41(33,"ion-select-option",21),e.EFF(34,"20-10-02"),e.k0s(),e.j41(35,"ion-select-option",22),e.EFF(36,"20-10-03"),e.k0s(),e.j41(37,"ion-select-option",23),e.EFF(38,"20-10-04"),e.k0s(),e.j41(39,"ion-select-option",24),e.EFF(40,"20-10-05"),e.k0s(),e.j41(41,"ion-select-option",25),e.EFF(42,"20-10-06"),e.k0s(),e.j41(43,"ion-select-option",26),e.EFF(44,"30-10-01"),e.k0s(),e.j41(45,"ion-select-option",27),e.EFF(46,"30-10-02"),e.k0s(),e.j41(47,"ion-select-option",28),e.EFF(48,"30-10-03"),e.k0s(),e.j41(49,"ion-select-option",29),e.EFF(50,"30-10-04"),e.k0s(),e.j41(51,"ion-select-option",30),e.EFF(52,"30-10-05"),e.k0s(),e.j41(53,"ion-select-option",31),e.EFF(54,"30-10-06"),e.k0s(),e.j41(55,"ion-select-option",32),e.EFF(56,"30-10-07"),e.k0s(),e.j41(57,"ion-select-option",33),e.EFF(58,"30-10-08"),e.k0s(),e.j41(59,"ion-select-option",34),e.EFF(60,"30-10-09"),e.k0s(),e.j41(61,"ion-select-option",34),e.EFF(62,"30-10-10"),e.k0s(),e.j41(63,"ion-select-option",35),e.EFF(64,"30-10-10"),e.k0s(),e.j41(65,"ion-select-option",36),e.EFF(66,"30-10-38"),e.k0s(),e.j41(67,"ion-select-option",37),e.EFF(68,"30-10-41"),e.k0s(),e.j41(69,"ion-select-option",38),e.EFF(70,"30-10-42"),e.k0s(),e.j41(71,"ion-select-option",39),e.EFF(72,"30-10-43"),e.k0s(),e.j41(73,"ion-select-option",40),e.EFF(74,"30-10-46"),e.k0s(),e.j41(75,"ion-select-option",41),e.EFF(76,"30-10-47"),e.k0s(),e.j41(77,"ion-select-option",42),e.EFF(78,"30-10-48"),e.k0s(),e.j41(79,"ion-select-option",43),e.EFF(80,"30-10-49"),e.k0s(),e.j41(81,"ion-select-option",44),e.EFF(82,"30-10-50"),e.k0s(),e.j41(83,"ion-select-option",45),e.EFF(84,"30-10-52"),e.k0s(),e.j41(85,"ion-select-option",46),e.EFF(86,"30-10-53"),e.k0s(),e.j41(87,"ion-select-option",47),e.EFF(88,"30-10-54"),e.k0s(),e.j41(89,"ion-select-option",48),e.EFF(90,"30-10-56"),e.k0s(),e.j41(91,"ion-select-option",49),e.EFF(92,"30-10-57"),e.k0s(),e.j41(93,"ion-select-option",50),e.EFF(94,"30-10-58"),e.k0s(),e.j41(95,"ion-select-option",51),e.EFF(96,"30-10-59"),e.k0s(),e.j41(97,"ion-select-option",52),e.EFF(98,"30-10-60"),e.k0s(),e.j41(99,"ion-select-option",53),e.EFF(100,"30-10-61"),e.k0s(),e.j41(101,"ion-select-option",54),e.EFF(102,"40-10-04"),e.k0s(),e.j41(103,"ion-select-option",55),e.EFF(104,"40-10-11"),e.k0s(),e.j41(105,"ion-select-option",56),e.EFF(106,"40-10-13"),e.k0s(),e.j41(107,"ion-select-option",57),e.EFF(108,"40-10-16"),e.k0s(),e.j41(109,"ion-select-option",58),e.EFF(110,"40-10-20"),e.k0s(),e.j41(111,"ion-select-option",59),e.EFF(112,"40-10-21"),e.k0s(),e.j41(113,"ion-select-option",60),e.EFF(114,"40-10-22"),e.k0s(),e.j41(115,"ion-select-option",61),e.EFF(116,"40-10-24"),e.k0s(),e.j41(117,"ion-select-option",62),e.EFF(118,"40-10-26"),e.k0s(),e.j41(119,"ion-select-option",63),e.EFF(120,"40-10-30"),e.k0s(),e.j41(121,"ion-select-option",64),e.EFF(122,"40-10-34"),e.k0s(),e.j41(123,"ion-select-option",65),e.EFF(124,"40-10-38"),e.k0s(),e.j41(125,"ion-select-option",66),e.EFF(126,"40-10-40"),e.k0s(),e.j41(127,"ion-select-option",67),e.EFF(128,"40-10-41"),e.k0s(),e.j41(129,"ion-select-option",68),e.EFF(130,"40-10-42"),e.k0s(),e.j41(131,"ion-select-option",69),e.EFF(132,"40-10-43"),e.k0s(),e.j41(133,"ion-select-option",70),e.EFF(134,"40-10-44"),e.k0s(),e.j41(135,"ion-select-option",71),e.EFF(136,"40-10-45"),e.k0s(),e.j41(137,"ion-select-option",72),e.EFF(138,"40-10-46"),e.k0s(),e.j41(139,"ion-select-option",73),e.EFF(140,"40-10-47"),e.k0s(),e.j41(141,"ion-select-option",74),e.EFF(142,"40-10-48"),e.k0s(),e.j41(143,"ion-select-option",75),e.EFF(144,"40-10-49"),e.k0s(),e.j41(145,"ion-select-option",76),e.EFF(146,"40-10-50"),e.k0s(),e.j41(147,"ion-select-option",77),e.EFF(148,"40-10-51"),e.k0s(),e.j41(149,"ion-select-option",78),e.EFF(150,"40-10-52"),e.k0s(),e.j41(151,"ion-select-option",79),e.EFF(152,"40-10-53"),e.k0s(),e.j41(153,"ion-select-option",80),e.EFF(154,"40-10-54"),e.k0s(),e.j41(155,"ion-select-option",81),e.EFF(156,"40-10-55"),e.k0s(),e.j41(157,"ion-select-option",82),e.EFF(158,"40-10-56"),e.k0s(),e.j41(159,"ion-select-option",83),e.EFF(160,"40-10-57"),e.k0s(),e.j41(161,"ion-select-option",84),e.EFF(162,"40-10-58"),e.k0s(),e.j41(163,"ion-select-option",85),e.EFF(164,"40-10-59"),e.k0s(),e.j41(165,"ion-select-option",86),e.EFF(166,"50-10-01"),e.k0s(),e.j41(167,"ion-select-option",87),e.EFF(168,"50-10-02"),e.k0s()()(),e.j41(169,"ion-item")(170,"ion-label",8),e.EFF(171,"Usuario"),e.k0s(),e.j41(172,"ion-input",88),e.mxI("ngModelChange",function(o){e.eBV(n);const i=e.XpG();return e.DH7(i.solpe.usuario,o)||(i.solpe.usuario=o),e.Njj(o)}),e.k0s()(),e.j41(173,"h5"),e.EFF(174,"Tabla de Items"),e.k0s(),e.j41(175,"div",89)(176,"table",90)(177,"thead")(178,"tr")(179,"th"),e.EFF(180,"Item"),e.k0s(),e.j41(181,"th"),e.EFF(182,"Descripci\xf3n"),e.k0s(),e.j41(183,"th"),e.EFF(184,"C\xf3digo Referencial"),e.k0s(),e.j41(185,"th"),e.EFF(186,"Cantidad"),e.k0s(),e.j41(187,"th"),e.EFF(188,"Acciones"),e.k0s()()(),e.j41(189,"tbody"),e.DNE(190,k,14,9,"tr",91),e.k0s()(),e.j41(191,"ion-buttons",92)(192,"ion-button",93),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.agregarFila())}),e.nrm(193,"ion-icon",94),e.EFF(194," Agregar Fila "),e.k0s(),e.j41(195,"ion-button",95),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.guardarSolpe())}),e.nrm(196,"ion-icon",96),e.EFF(197," Enviar "),e.k0s()()()()}if(2&l){const n=e.XpG();e.R7$(4),e.R50("ngModel",n.solpe.numero_solpe),e.R7$(4),e.R50("ngModel",n.solpe.fecha),e.R7$(4),e.R50("ngModel",n.solpe.numero_contrato),e.R7$(160),e.R50("ngModel",n.solpe.usuario),e.R7$(18),e.Y8G("ngForOf",n.solpe.items)}}const E=[{path:"",component:(()=>{var l;class a{constructor(t,o,i,c){this.solpeService=t,this.toastController=o,this.afAuth=i,this.firestore=c,this.modoSeleccionado="formulario",this.solpe={numero_solpe:null,fecha:"",numero_contrato:"",usuario:"",items:[],estatus:"Solicitado"}}ngOnInit(){this.solpe.fecha=(new Date).toISOString().split("T")[0],this.obtenerUltimoNumeroSolpe(),this.obtenerNombreUsuario()}obtenerUltimoNumeroSolpe(){this.solpeService.obtenerUltimaSolpe().subscribe(t=>{this.solpe.numero_solpe=t.length>0?t[0].numero_solpe+1:1})}agregarFila(){this.solpe.items.push({id:this.solpe.items.length>0?this.solpe.items[this.solpe.items.length-1].id+1:1,descripcion:"",codigo_referencial:"",cantidad:null,editando:!0})}eliminarItem(t){this.solpe.items.splice(t,1),this.mostrarToast("Item eliminado","danger")}verificarYGuardarItem(t){const o=this.solpe.items[t];o.descripcion&&o.codigo_referencial&&null!==o.cantidad&&this.guardarItem(t)}guardarItem(t){this.solpe.items[t].editando=!1,this.mostrarToast("Item guardado correctamente","success")}editarItem(t){this.solpe.items[t].editando=!0}guardarEdicion(t){this.solpe.items[t].editando=!1,this.mostrarToast("Item actualizado","success")}obtenerNombreUsuario(){this.afAuth.authState.subscribe(t=>{if(t){const o=t.uid;this.firestore.collection("Usuarios").doc(o).get().subscribe(i=>{if(i.exists){const c=i.data();this.solpe.usuario=c.fullName}else console.log("No se encontr\xf3 el usuario en la colecci\xf3n.")})}else console.log("No hay usuario logueado")})}guardarSolpe(){if(0===this.solpe.items.length)return void this.mostrarToast("Debes agregar al menos un item","warning");this.solpe.items=this.solpe.items.map((o,i)=>({item:i+1,descripcion:o.descripcion,codigo_referencial:o.codigo_referencial,cantidad:o.cantidad}));const t=new Date;this.solpe.fecha=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`,this.solpeService.guardarSolpe(this.solpe).then(()=>{this.mostrarToast("SOLPE guardada con \xe9xito","success"),this.resetearFormulario()}).catch(o=>{console.error(o),this.mostrarToast("Error al guardar la SOLPE","danger")})}resetearFormulario(){this.solpe={numero_solpe:null,fecha:"",numero_contrato:"",usuario:"",items:[],estatus:"Solicitado"},this.obtenerUltimoNumeroSolpe()}mostrarToast(t,o){var i=this;return(0,g.A)(function*(){(yield i.toastController.create({message:t,duration:2e3,color:o})).present()})()}}return(l=a).\u0275fac=function(t){return new(t||l)(e.rXU(F.h),e.rXU(s.K_),e.rXU(m.DS),e.rXU(j.Qe))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-solpe"]],decls:12,vars:2,consts:[["slot","start"],["defaultHref","/menu-solpe",2,"color","white"],[1,"ion-padding"],[1,"container"],[3,"ngModelChange","ngModel"],["value","formulario"],["class","form-container",4,"ngIf"],[1,"form-container"],["position","floating"],["type","number","readonly","",3,"ngModelChange","ngModel"],["type","date","readonly","",3,"ngModelChange","ngModel"],["value","10-10-01"],["value","10-10-02"],["value","10-10-03"],["value","10-10-04"],["value","10-10-05"],["value","10-10-06"],["value","10-10-10"],["value","10-10-12"],["value","10-10-15"],["value","20-10-01"],["value","20-10-02"],["value","20-10-03"],["value","20-10-04"],["value","20-10-05"],["value","20-10-06"],["value","30-10-01"],["value","30-10-02"],["value","30-10-03"],["value","30-10-04"],["value","30-10-05"],["value","30-10-06"],["value","30-10-07"],["value","30-10-08"],["value","30-10-10"],["value","30-10-11"],["value","30-10-38"],["value","30-10-41"],["value","30-10-42"],["value","30-10-43"],["value","30-10-46"],["value","30-10-47"],["value","30-10-48"],["value","30-10-49"],["value","30-10-50"],["value","30-10-52"],["value","30-10-53"],["value","30-10-54"],["value","30-10-56"],["value","30-10-57"],["value","30-10-58"],["value","30-10-59"],["value","30-10-60"],["value","30-10-61"],["value","40-10-04"],["value","40-10-11"],["value","40-10-13"],["value","40-10-16"],["value","40-10-20"],["value","40-10-21"],["value","40-10-22"],["value","40-10-24"],["value","40-10-26"],["value","40-10-30"],["value","40-10-34"],["value","40-10-38"],["value","40-10-40"],["value","40-10-41"],["value","40-10-42"],["value","40-10-43"],["value","40-10-44"],["value","40-10-45"],["value","40-10-46"],["value","40-10-47"],["value","40-10-48"],["value","40-10-49"],["value","40-10-50"],["value","40-10-51"],["value","40-10-52"],["value","40-10-53"],["value","40-10-54"],["value","40-10-55"],["value","40-10-56"],["value","40-10-57"],["value","40-10-58"],["value","40-10-59"],["value","50-10-01"],["value","50-10-02"],["readonly","",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"styled-table"],[4,"ngFor","ngForOf"],[1,"botones-flex"],["expand","full",3,"click"],["name","add-outline"],["expand","block","color","success",3,"click"],["name","send-outline"],[3,"ngModelChange","ionInput","ionBlur","ngModel","readonly"],["type","number",3,"ngModelChange","ionBlur","ngModel","readonly"],["fill","clear","color","primary",3,"click",4,"ngIf"],["fill","clear","color","success",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click"],["name","trash-outline"],["fill","clear","color","primary",3,"click"],["name","create-outline"],["fill","clear","color","success",3,"click"],["name","save-outline"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Creaci\xf3n de SOLPED"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"div",3)(8,"ion-segment",4),e.mxI("ngModelChange",function(c){return e.DH7(o.modoSeleccionado,c)||(o.modoSeleccionado=c),c}),e.j41(9,"ion-segment-button",5),e.EFF(10,"Formulario de SOLPED"),e.k0s()(),e.DNE(11,v,198,5,"div",6),e.k0s()()),2&t&&(e.R7$(8),e.R50("ngModel",o.modoSeleccionado),e.R7$(3),e.Y8G("ngIf","formulario"===o.modoSeleccionado))},dependencies:[p.Sq,p.bT,u.BC,u.vS,s.Jm,s.QW,s.W9,s.eU,s.iq,s.$w,s.uz,s.he,s.Gp,s.eP,s.Nm,s.Ip,s.BC,s.ai,s.su,s.Je,s.Gw,s.el],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px}.form-container[_ngcontent-%COMP%]{padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.botones-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:10px}.table-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:auto}ion-select-option[_ngcontent-%COMP%]{color:#fff}.styled-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#57bd84;color:#fff}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.image-card[_ngcontent-%COMP%]{padding:30px;border-radius:15px;box-shadow:0 4px 10px #ffffff1a;width:100%;max-width:2000px;height:auto;min-height:400px}.custom-file-upload[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#2c2c2c;padding:20px;border-radius:10px;border:2px dashed #888;margin-top:15px;cursor:pointer;width:100%;font-size:18px;font-weight:700;color:#fff}.custom-file-upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploaded-image[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;margin-top:10px;border-radius:10px;image-rendering:auto}ion-button[_ngcontent-%COMP%]{margin-top:15px;font-size:15px;padding:10px}.chat-icon[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000;background:transparent;border:none;font-size:16px;width:40px;height:40px}.custom-toast[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 6px #0000001a;font-weight:700;font-size:16px}ion-segment-button[_ngcontent-%COMP%]{--indicator-color: rgb(87, 189, 132)1}ion-segment-button.md[_ngcontent-%COMP%]{--color: #ffffff;--color-checked: rgb(87, 189, 132);--indicator-height: 4px}ion-segment-button.ios[_ngcontent-%COMP%]{--color: rgb(87, 189, 132);--color-checked: #fff;--border-radius: 20px}"]}),a})()}];let b=(()=>{var l;class a{}return(l=a).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[_.iI.forChild(E),_.iI]}),a})(),x=(()=>{var l;class a{}return(l=a).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[p.MD,u.YN,s.bv,b]}),a})()}}]);